# 인터럽트(Interrupt)

다양한 입출력장치가 개발되어 운영체제가 모든 입출력을 관리하기 어려워지자 입출력을 요청하고 입출력이 완료되면 이벤트를 발생시켜 CPU에게 알리는데 이를 __인터럽트__ 라고 한다.
 
## 인터럽트 종류

인터럽트는 프로세스가 실행 중인 명령어로 인해 발생하는 동기적 인터럽트와 실행 중인 명령어와 무관하게 발생하는 비동기적 인터럽트로 나눌 수 있다.

동기적 인터럽트는 사용자 인터럽트라고도 하며, 아래와 같은 종류가 있다.  

* 프로그램상의 문제 때문에 발생하는 인터럽트(다른 사용자의 메모리 영역에 접근하는 경우, 오버 플로나 언더플로에 의해 발생한 경우)
* 컴퓨터 작업자가 의도적으로 프로세스를 중단하기 위해 발생시킨 인터럽트
* 입출력장치 같은 주변장치의 조작에 의한 인터럽트
* 산술 연산 중 발생하는 인터럽트

비동기적 인터럽트는 다음과 같다.

* 하드 디스크 읽기 오류, 메모리 불량과 같은 하드웨어적인 오류로 발생하는 인터럽트다.
* 사용자가 직접 작동하는 키보드 인터럽트, 마우스 인터럽트 등이 있다.

## 인터럽트 작동

간단한 인터럽트 작동 방식이다.

<img width="494" alt="스크린샷 2023-05-16 오전 12 18 55" src="https://github.com/hyeong-jun-kim/CS-Study/assets/76802855/736beb1d-2354-4973-8110-b874a624bd09">

* 인터럽트에는 해당 인터럽트가 발생하면 어떤 일을 할지, __서비스 루틴__ 이 정의되어 있다.
* 즉 인터럽트 번호와 그 번호에 붙어 있는 인터럽트 핸들러로 이루어져 있다.
* 인터럽트 핸들러는 인터럽트 처리를 위해 미리 정의된 함수다. 
* 인터럽트는 한 번에 하나씩 발생하는 것이 아니라 한순간에 여러 개가 발생하기도 한다.
* 이렇게 동시에 발생하는 인터럽트를 하나로 묶어서 처리하는 개념이 __인터럽트 벡터__ 다.
* 인터럽트 벡터는 인터럽트와 인터럽트 핸들러를 일대일로 연결한 자료구조다.

인터럽트 작동 방식에 설명을 더하겠다.

1. 인터럽트가 발생하면 현재 실행 중인 프로세스는 일시 정지 상태가 되며, 재시작하기 위해 현재 프로세스 관련 정보를 임시로 저장한다.
2. 인터럽트 컨트롤러가 실행되어 인터럽트의 처리 순서를 정한다. 이때 여러 개의 인터럽트가 동시에 발생했다면 인터럽트의 우선순위를 고려해 중요한 인터럽트부터 처리하도록 순서를 정한다.
3. 먼저 처리할 인터럽트가 결정되면 인터럽트 벡터에 등록된 인터럽트 핸들러가 실행된다. 
5. 인터럽트 처리를 위한 함수를 정의하여 인터럽트 벡터에 등록해놓으면 해당 인터럽트 발생 시 함수가 실행되어 인터럽트를 처리한다.
6. 인터럽트 벡터에 연결된 핸들러가 인터럽트 처리를 마치면 일시 정지된 프로세스가 다시 실행되거나 종료된다. 
7. 발생한 인터럽트가 입출력 완료 같은 경우면 일시 정지된 프로세스가 다시 실행되고, 다른 프로세스의 메모리 영역 침범이나 오류 같은 경우면 종료된다.

과거에는 입출력을 요청하면 운영체제가 주기적으로 입출력장치를 직접 확인해서 처리했는데 이 방식을 폴링이라고 한다.
 
> 현재는 인터럽트, 이벤트 드리븐 방식을 도입하면서 현재의 task에 집중할 수 있고 시스템 효율을 높였다.





